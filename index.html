<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Redirecting…</title>
</head>
<body>
  <p>Redirecting…</p>
  <script>
    // Get the full path after "/link"
    const path = window.location.pathname.replace(/^\/link/, "");
    const query = window.location.search;

    // iOS deeplink
    const iosURL = `elandcloud://${path}${query}`;

    // Android intent URL
    // Replace "com.yourcompany.yourapp" with your actual Android package name
    const androidPackage = "com.elandgames.elandcloud";
    const fallbackURL = `https://elandcloudapp.github.io/link${path}${query}`; // Web fallback
    const androidURL = `intent://${path}${query}#Intent;scheme=elandcloud;package=${androidPackage};S.browser_fallback_url=${encodeURIComponent(fallbackURL)};end`;

    // Detect Android
    const isAndroid = /Android/i.test(navigator.userAgent);

    // Redirect
    window.location.href = isAndroid ? androidURL : iosURL;

    // Fallback for devices that do not handle the deeplink
    setTimeout(() => {
      window.location.href = fallbackURL;
    }, 2500);
  </script>
</body>
</html>
